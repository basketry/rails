# This code was generated by @basketry/rails@{{version}}
#
# Changes to this file may cause incorrect behavior and will be lost if
# the code is regenerated.
#
# To make changes to the contents of this file:
# 1. Edit source/path.ext
# 2. Run the Basketry CLI
#
# About Basketry: https://github.com/basketry/basketry/wiki
# About @basketry/rails: https://github.com/basketry/rails#readme

module BasketryExample
  class WidgetsController < ActionController::Base
    include BasketryExample::ControllerHelpers

    def get_widgets
      response = services.widget_service.get_widgets(
      )

      render json: map_widget_to_dto(response), status: status_code(response.errors) || 200
    end

    def create_widget
      response = services.widget_service.create_widget(
        body: map_dto_to_create_widget_body(JSON.parse(request.body.read))
      )

      render status: status_code(response.errors) || 204
    end

    def put_widget
      response = services.widget_service.put_widget(
      )

      render status: status_code(response.errors) || 200
    end

    def get_widget_foo
      response = services.widget_service.get_widget_foo(
        id: params['id']
      )

      render json: map_widget_to_dto(response), status: status_code(response.errors) || 200
    end

    def delete_widget_foo
      response = services.widget_service.delete_widget_foo(
        id: params['id']
      )

      render status: status_code(response.errors) || 204
    end
  end
end
